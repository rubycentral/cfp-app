.navbar.navbar-expand-lg.navbar-default.fixed-top
  .container-fluid
    - if current_event
      = link_to "#{current_event.name} CFP", event_path(current_event), class: 'navbar-brand'
    - else
      = link_to "CFP App", events_path, class: 'navbar-brand'
    %button.navbar-toggler{ type: "button", data: { bs_toggle: "collapse", bs_target: ".navbar-collapse" }, aria: { controls: "navbarNav", expanded: "false", label: "Toggle navigation" } }
      %span.navbar-toggler-icon

    .collapse.navbar-collapse#navbarNav
      - if current_user
        %ul.navbar-nav.ms-auto
          - roles = current_user.teammates.where(event_id: current_event).pluck(:role)

          - if speaker_nav?
            %li.nav-item{class: nav_item_class(:my_proposals)}
              = link_to proposals_path, class: 'nav-link' do
                %span My Proposals

          - if review_nav?(roles)
            %li.nav-item{class: nav_item_class(:event_review_proposals)}
              = link_to event_staff_proposals_path(current_event), class: 'nav-link' do
                %span Review

          - if program_nav?(roles)
            %li.nav-item{class: nav_item_class(:event_selection)}
              = link_to event_staff_program_proposals_path(current_event), class: 'nav-link' do
                %span Selection
            %li.nav-item{class: nav_item_class(:event_program)}
              = link_to event_staff_program_sessions_path(current_event), class: 'nav-link' do
                %span Program

          - if schedule_nav?(roles)
            %li.nav-item{class: nav_item_class(:event_schedule)}
              = link_to event_staff_schedule_grid_path(current_event), class: 'nav-link' do
                %span Schedule

          - if staff_nav?(roles)
            %li.nav-item{class: nav_item_class(:event_dashboard)}
              = link_to event_staff_path(current_event), class: 'nav-link' do
                %span Dashboard

          - if !ENV['DISABLE_WEBSITE'] && website_nav?
            %li.nav-item{class: nav_item_class(:event_website)}
              = link_to new_or_edit_website_path, class: 'nav-link' do
                %span Website
                %sup Beta

          - if admin_nav?
            = render partial: "layouts/nav/admin_nav"

          = render partial: "layouts/nav/notifications_list"

          = render partial: "layouts/nav/user_dropdown"

      - else
        %ul.navbar-nav.ms-auto
          %li.nav-item= link_to "Log in", new_user_session_path, class: 'nav-link'

- if display_staff_event_subnav?
  = render partial: "layouts/nav/staff/event_subnav"

- elsif display_staff_selection_subnav?
  = render partial: "layouts/nav/staff/selection_subnav"

- elsif display_staff_program_subnav?
  = render partial: "layouts/nav/staff/program_subnav"

- elsif schedule_mode?
  = render partial: "layouts/nav/staff/schedule_subnav"

- elsif display_website_subnav?
  = render "layouts/nav/staff/website_subnav"
