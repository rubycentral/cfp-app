%ul.messages_layout
  - comments.sort_by(&:created_at).each do |comment|
    %li.comment.markdown{ class: choose_class_for(comment) }
      .message_wrap
        - if comment.user.present?
          .info
            %p.name
              = commenter_name(comment)
            %span.time #{comment.created_at.to_fs(:day_at_time)}
        .text
          =markdown(comment.body)

= form_for comments.new do |f|
  = f.hidden_field :proposal_id
  .form-group
    - if internal?(f.object)
      = f.text_area :body, class: 'form-control', placeholder: 'Add your comment', rows: 5, data: { controller: 'mention', mention_names: @mention_names }
    - else
      = f.text_area :body, class: 'form-control', placeholder: 'Add your comment', rows: 5
  .form-group
    %button.btn.btn-success.save-comment{type: 'submit', data: {turbo_confirm: internal?(f.object) ? nil : 'Are you sure you want to post a Public comment?'}}
      %span.bi.bi-check
      Comment
